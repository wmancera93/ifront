<div class="row-hr-container">
  <div class="col-12">
    <div class="row justify-content-center">
      <div class="col-xl-10 col-md-8 col-7 text-left title">
        <i class="fa fa-money"></i>
        {{ parseT('tittle') | translate }}
      </div>
      <div
        class="col-xl-2 col-md-4 col-5  text-center cursor-general"
        style="padding-right: 0px"
      >
        <div class="buttonBack img-zoom" (click)="returnBackPage()">
          <div class="padding-back">
            <i class="fa fa-fw fa-sign-in fa-rotate-180 fa-lg"></i>
            <span>
              {{ parseT('back') | translate }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="row-hr-container justify-content-center">
  <div class="col-12  widget bg-white minHeight">
    <div class="row justify-content-center top-containter">
      <div class="col-lg-4 col-12">
        <div class="row" style="margin-top: 10px">
          <div class="col-12">
            <button
              id="btn-travelManagement"
              type="button"
              class="btn tabDate btn-block cursor-general"
              (click)="newAdvanceTravel()"
            >
              <i class="fa fa-plus">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</i>
              {{ parseT('btn_new') | translate }}
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- begin filters -->
    <div class="border-botton-general">
      <div class="row top-containter">
        <div class="col-xl-4 col-lg-4 col-12 text-left">
          <b>
            {{ parseT('query_filters') | translate }}
          </b>
          <i
            *ngIf="!is_collapse"
            class="fa fa-fw icon-collapse fa-plus fa-1x cursor-general"
            data-toggle="collapse"
            data-target="#collapseFilter"
            aria-expanded="false"
            (click)="collapse(true)"
          ></i>
          <i
            *ngIf="is_collapse"
            class="fa fa-fw icon-collapse fa-minus fa-1x cursor-general"
            data-toggle="collapse"
            data-target="#collapseFilter"
            aria-expanded="false"
            (click)="collapse(false)"
          ></i>
        </div>
      </div>
    </div>

    <div
      class="collapse top-general-p border-botton-general"
      id="collapseFilter"
    >
      <div class="row align-items-center">
        <div class="col-12" style="padding-bottom: 15px">
          <div class="row align-items-center">
            <div class="col-lg-3 col-md-6 col-12">
              <label> {{ parseT('btn_hr') | translate }}</label>
              <div class="row">
                <div class="col-9">
                  <input
                    type="text"
                    [(ngModel)]="codIHR"
                    class="form-control"
                  />
                </div>
                <div class="col-3">
                  <button
                    type="button"
                    class="btn btn-block cursor-general tabDate"
                    (click)="filter('codIHR')"
                  >
                    <i
                      class="fa fa-search"
                      style="margin-left: -5px;"
                    ></i>
                  </button>
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-md-6 col-12">
              <label>{{ parseT('btn_sap') | translate }}</label>
              <div class="row">
                <div class="col-9">
                  <input
                    type="text"
                    [(ngModel)]="codSAP"
                    class="form-control"
                  />
                </div>
                <div class="col-3">
                  <button
                    type="button"
                    class="btn btn-block cursor-general tabDate"
                    (click)="filter('codSAP')"
                  >
                    <i
                      class="fa fa-search"
                      style="margin-left: -5px;"
                    ></i>
                  </button>
                </div>
              </div>
            </div>
            <div class="col-lg-6 col-md-12 col-12">
              <div class="row">
                <div class="col-5">
                  <label>{{
                    parseT('date_begin') | translate
                  }}</label>
                  <input
                    type="date"
                    [(ngModel)]="datesBegin"
                    class="form-control"
                  />
                </div>
                <div class="col-5">
                  <label>{{ parseT('date_end') | translate }}</label>
                  <input
                    type="date"
                    [(ngModel)]="datesEnd"
                    class="form-control"
                  />
                </div>
                <div class="col-2 align-self-end">
                  <button
                    type="button"
                    class="btn btn-block cursor-general tabDate"
                    (click)="filter('dates')"
                  >
                    <i
                      class="fa fa-search"
                      style="margin-left: -5px;"
                    ></i>
                  </button>
                </div>
              </div>
            </div>

            <div class="col-lg-3 col-md-4 col-12">
              <label>{{ parseT('status') | translate }}</label>
              <select
                type="date"
                [(ngModel)]="status"
                class="form-control"
                (change)="filter('status')"
              >
                <option value="">{{
                  parseT('all_status') | translate
                }}</option>
                <option value="ReqReg">{{
                  parseT('resgistered') | translate
                }}</option>
                <option value="ReqPro">{{
                  parseT('process') | translate
                }}</option>
                <option value="ReqApp">{{
                  parseT('approved') | translate
                }}</option>
                <option value="ReqCan">{{
                  parseT('cancelled') | translate
                }}</option>
                <option value="ReqWai">{{
                  parseT('hold_on') | translate
                }}</option>
              </select>
            </div>
            <div class="col-lg-3 col-md-4 col-12">
              <label>{{ parseT('status_settle') | translate }}</label>
              <select
                type="date"
                [(ngModel)]="statusLiquid"
                class="form-control"
                (change)="filter('statusLiquid')"
              >
                <option value="">{{
                  parseT('all_status') | translate
                }}</option>
                <option value="LiqPen">{{
                  parseT('to_settle') | translate
                }}</option>
                <option value="LiqApp">{{
                  parseT('settlement') | translate
                }}</option>
                <option value="LiqAnn">{{
                  parseT('cancelled') | translate
                }}</option>
              </select>
            </div>
            <div class="col-lg-3 col-md-4 col-12">
              <label>{{ parseT('employee') | translate }}</label>
              <div class="row">
                <div class="col-9">
                  <input
                    type="text"
                    [(ngModel)]="codEmployee"
                    class="form-control"
                  />
                </div>
                <div class="col-3">
                  <button
                    type="button"
                    class="btn btn-block cursor-general tabDate"
                    (click)="filter('codEmployee')"
                  >
                    <i
                      class="fa fa-search"
                      style="margin-left: -5px;"
                    ></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- end filters -->

    <div class="row top-containter" style="margin-top: 20px">
      <div class="col-12 text-left">
        <form>
          <input
            *ngIf="userAuthenticated.employee.trip_by_third"
            type="radio"
            name="travel"
            id="advance_request"
            checked
            (click)="checkAdvance('advance_request')"
          />
          <b>
            {{ parseT('select_my') | translate }}
          </b>
          &nbsp;&nbsp;
          <input
            *ngIf="userAuthenticated.employee.trip_by_third"
            type="radio"
            name="travel"
            id="my_advance_request"
            (click)="checkAdvance('my_advance_request')"
          />
          <b *ngIf="userAuthenticated.employee.trip_by_third">
            {{ parseT('select_third') | translate }}
          </b>
        </form>
      </div>
    </div>
    <div class="row justify-content-center top-containter">
      <div class="col-12">
        <div
          class="widget bg-white-1x"
          *ngFor="let advance of advancesItems"
        >
          <div class="row align-items-center">
            <div class="col-lg-2 col-md-3 col-12">
              <h5>
                <span
                  *ngIf="advance.ticket_cli !== null"
                  class="badge badge-warning"
                >
                  {{ parseT('travel_sap') | translate }}
                  {{ advance.ticket_cli }}
                </span>
                <span
                  *ngIf="
                    advance.messages_server !== null &&
                    advance.synch_type_server !== 'S'
                  "
                >
                  <h6
                    class="wg-hover-general"
                    (click)="messages_error_advances(advance.id)"
                  >
                    <i
                      class="fa fa-fw fa-exclamation-triangle text-danger wg-hover-general"
                      (click)="messages_error_advances(advance.id)"
                    ></i
                    >{{ parseT('error_synch') | translate }}
                  </h6>
                </span>
                <span class="badge badge-warning">
                  {{ parseT('travel_ihr') | translate }}
                  {{ advance.travel_request_id }}
                </span>
              </h5>
              <p>
                <i class="fa fa-plane"></i>
                {{ parseT('date_in') | translate }}
                {{ advance.date_begin_format }}
              </p>
              <p>
                {{ parseT('date_out') | translate }}
                {{ advance.date_end_format }}
              </p>
            </div>
            <!-- <div class="col-lg-4 col-md-3 col-12">
              <h5>
                <span class="badge badge-warning">
                  Código # {{advance.travel_request_id}}
                </span>
              </h5>
              <!-- <p>
                <i class="fa fa-clock-o"></i>
                Creada el {{advance.date_created_at}}
              </p> -->
            <!-- </div> -->
            <div
              class="col-lg-3 col-md-9 col-12 text-xl-left text-lg-center text-center top-p"
            >
              <h3 class="font-color-default">
                {{ advance.name_travel | slice: 0:59 }}
                <span
                  [hidden]="advance.travel_request_name.length < 59"
                ></span>
              </h3>
            </div>
            <div
              class="col-lg-2 col-md-9 col-12 text-md-left text-center top-p"
            >
              <p class="font-title-general">
                {{ parseT('status_label') | translate }}:
              </p>
              <h6 *ngIf="advance.status_name == 'Aprobado'">
                <span class="badge badge-primary">
                  {{ advance.status_name }}
                </span>
              </h6>
              <h6 *ngIf="advance.status_name == 'Cancelado'">
                <span class="badge badge-danger">
                  {{ advance.status_name }}
                </span>
              </h6>
              <h6 *ngIf="advance.status_liq_code == 'LiqAnn'">
                <span class="badge badge-danger">
                  {{ advance.status_liq_name }}
                </span>
              </h6>
              <h6 *ngIf="advance.status_name == 'En proceso'">
                <span class="badge badge-success">
                  {{ advance.status_name }}
                </span>
              </h6>
              <h6 *ngIf="advance.status_liq_code == 'LiqApp'">
                <span class="badge badge-success">
                  {{ advance.status_liq_name }}
                </span>
              </h6>
              <h6 *ngIf="advance.status_name == 'Registrado'">
                <span class="badge badge-default">
                  {{ advance.status_name }}
                </span>
              </h6>
              <h6 *ngIf="advance.status_liq_code == 'LiqPen'">
                <span class="badge badge-default">
                  {{ advance.status_liq_name }}
                </span>
              </h6>
            </div>
            <!-- <div class="col-lg-3 col-md-9 col-12 text-md-left text-center top-p">
              <p class="font-title-general">
                Solicitud de viaje
              </p>
              <p class="">
                <i class="fa fa-hashtag fa-fw text-primary-hr"></i>
                {{advance.travel_request_id}}
              </p>
            </div> -->

            <div
              class="col-lg-4 col-md-9 col-12 text-md-left text-center top-p"
              *ngIf="
                advance.next_approver_to_json.approver_employee !=
                undefined
              "
            >
              <p class="font-title-general">
                {{
                  advance.next_approver_to_json.approver_employee
                    .short_name
                }}
              </p>
              <p class="">
                {{
                  advance.next_approver_to_json.approver_employee
                    .posicion
                }}
              </p>
              <p class="">
                {{ parseT('approver') | translate }}
                {{ advance.next_approver_to_json.level }}
              </p>
            </div>
            <div
              class="col-lg-4 col-md-9 col-12 text-md-left text-center top-p"
              *ngIf="
                advance.next_approver_to_json.approver_employee ==
                undefined
              "
            >
              <p class="font-title-general">
                {{ parseT('message_approver') | translate }}
              </p>
            </div>
            <div
              class="col-lg-1 col-md-4 col-4 top-p text-align-center"
            >
              <div class="row">
                <div
                  class="col-12 text-success number-size"
                  id="hideTrash"
                  style="cursor: pointer"
                  (click)="showAdvance(advance.id)"
                >
                  <i
                    class="fa fa-eye"
                    aria-hidden="true"
                    style="font-size:2em"
                  ></i>
                </div>
                <div class="col-12" (click)="showAdvance(advance.id)">
                  {{ parseT('see') | translate }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<app-new-advances *ngIf="!token"></app-new-advances>
<app-view-advance></app-view-advance>
<app-message-synch-advance></app-message-synch-advance>
